<!doctype html>
<html lang="es" data-bs-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Introducción a PHP – Estructuras de control</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Fuente -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- highlight.js (claro por defecto) -->
  <link id="hljsTheme" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">

  <style>
    :root{
      --brand-500:#2563eb;
      --brand-600:#1d4ed8;
      --accent-500:#06b6d4;
      --soft:#f7fafc;
      --radius:1rem;
      --hero-grad: linear-gradient(135deg, var(--brand-600), var(--brand-500));
    }
    :root[data-bs-theme="dark"]{
      --soft:#0f1216;
      --bs-body-bg:#0f1115;
      --bs-body-color:#e8edf3;
    }

    html,body{ font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    body { scroll-padding-top: 84px; } /* compensa navbar fija */

    /* ===== NAVBAR ===== */
    .navbar{ backdrop-filter: saturate(150%) blur(6px); }
    .navbar-brand{ font-weight:700; letter-spacing:.2px; }
    .brand-dot{ width:.7rem; height:.7rem; border-radius:999px; background:var(--brand-500); display:inline-block; margin-right:.5rem; }

    /* ícono hamburguesa visible en ambos temas */
    .navbar-toggler .navbar-toggler-icon{
      background-image: var(--bs-navbar-toggler-icon-bg, url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%280,0,0,.6%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e"));
    }
    [data-bs-theme="dark"] .navbar-toggler .navbar-toggler-icon{
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255,255,255,.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }

    /* ===== HERO (sólo “Estructuras de Control en PHP”) ===== */
    .hero{
      position: relative;
      color:#fff;
      background: radial-gradient(900px 420px at 10% -10%, rgba(255,255,255,.18), transparent),
                  var(--hero-grad);
      border-bottom-left-radius: 1.25rem;
      border-bottom-right-radius: 1.25rem;
      overflow: hidden;
    }
    .hero::before{
      content:""; position:absolute; inset:0;
      background-image: radial-gradient(rgba(255,255,255,.12) 1px, transparent 1px);
      background-size: 18px 18px; opacity:.25; pointer-events:none;
    }
    .hero::after{
      content:""; position:absolute; width:44vw; max-width:520px; aspect-ratio:1/1;
      right:-16vw; top:-14vw;
      background:radial-gradient(circle, rgba(255,255,255,.38), rgba(255,255,255,0));
      filter: blur(28px); pointer-events:none;
    }
    .hero h1{
      font-weight: 800;
      /* tamaño fluido entre 32px y 42px */
      font-size: clamp(2rem, 4vw, 2.625rem);
      line-height: 1.15;
      margin: 0;
    }
    .hero .grad{
      background: linear-gradient(90deg,#fff, #ffd166 60%, #fff);
      -webkit-background-clip: text; background-clip:text;
      color: transparent;
    }
    .hero-underline{ position:relative; display:inline-block; }
    .hero-underline::after{
      content:""; position:absolute; left:0; right:0; bottom:-10px; height:4px;
      background: linear-gradient(90deg,#ffd166,#a7f3d0,#93c5fd);
      border-radius:999px; transform: scaleX(.2); transform-origin:left;
      transition: transform .6s ease;
    }
    .hero:hover .hero-underline::after{ transform: scaleX(1); }

    .hero-kicker{
      backdrop-filter: blur(6px);
      background: rgba(255,255,255,.18) !important;
      border:1px solid rgba(255,255,255,.28);
    }
    .hero-wave{ position:absolute; left:0; right:0; bottom:-1px; color:#fff; opacity:.8; }

    /* ===== AJUSTES MÓVIL/TABLET ===== */
    @media (max-width: 576px){
      .hero{ padding: 2.1rem 1rem 2rem; }
      .hero .lead{ font-size: .98rem; }
      .hero-kicker{ font-size: .72rem; padding: .25rem .5rem; }
      .hero-wave{ height: 34px; }
    }
    @media (min-width: 577px) and (max-width: 991px){
      .hero{ padding: 3rem 1.25rem 2.5rem; }
      .hero .lead{ font-size: 1.05rem; }
    }
    @media (hover: none){
      .hero-underline::after{ transform: scaleX(1); }
    }
    .hero + .container{ margin-top: 1.25rem !important; }

    /* ===== CONTENIDO ===== */
    .section-soft{ background: var(--soft); border-radius: var(--radius); }
    .card-elev{ border:0; border-radius: var(--radius); box-shadow: 0 10px 28px rgba(0,0,0,.08); }
    [data-bs-theme="dark"] .card-elev{ box-shadow: 0 10px 28px rgba(0,0,0,.45); }
    .section-title{ display:flex; align-items:center; gap:.6rem; font-weight:700; margin-bottom:.5rem; }
    .section-title .badge{ background: var(--brand-500); }

    /* Código + Copiar */
    pre{ position:relative; margin-bottom: 0; }
    .btn-copy{ position:absolute; right:.5rem; top:.5rem; z-index:2 }

    /* TOC */
    .toc{ position: sticky; top: 6.5rem; }
    #tocNav .nav-link.active{ font-weight: 700; color: var(--brand-500); }

    /* Back to top */
    #toTop{ position:fixed; right:1rem; bottom:1rem; display:none; border-radius:999px; }

    footer{ background:#0b0f14; color:#b8c1cc; }

    /* Preferencias de movimiento */
    @media (prefers-reduced-motion: reduce){
      *{ scroll-behavior: auto !important; transition: none !important; }
    }
  </style>
</head>
<body data-bs-spy="scroll" data-bs-target="#tocNav" data-bs-smooth-scroll="true" tabindex="0">

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg bg-body border-bottom fixed-top shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="#inicio" aria-label="Ir al inicio"><span class="brand-dot"></span>Introducción a PHP</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-label="Abrir menú">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav ms-auto align-items-lg-center gap-2">
          <li class="nav-item">
            <button id="themeToggle" class="btn btn-sm btn-outline-secondary" type="button" aria-label="Cambiar tema">
              <i class="bi bi-moon-stars"></i> Tema oscuro
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header id="inicio" class="hero mt-5">
    <div class="container text-center py-5 position-relative">
      
      <h1 class="fw-bold hero-underline">Estructuras de Control en <span class="grad">PHP</span></h1>
      <p class="lead mb-0 opacity-75 mt-3">If · Switch · While · For · Foreach</p>
    </div>
    <svg class="hero-wave" height="48" viewBox="0 0 1440 120" preserveAspectRatio="none" aria-hidden="true">
      <path d="M0,64 C200,120 440,0 720,48 C1000,96 1240,24 1440,64 L1440,140 L0,140 Z" fill="currentColor"/>
    </svg>
  </header>

  <!-- CONTENIDO -->
  <main class="container my-5">

    <!-- TOC móvil (acordeón) -->
    <div class="d-lg-none mb-3">
      <div class="accordion" id="tocMobile">
        <div class="accordion-item">
          <h2 class="accordion-header" id="h-toc">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c-toc" aria-expanded="false" aria-controls="c-toc">
              Contenido
            </button>
          </h2>
          <div id="c-toc" class="accordion-collapse collapse" data-bs-parent="#tocMobile">
            <div class="accordion-body p-0">
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><a class="d-block py-2 text-decoration-none" href="#intro">Introducción</a></li>
                <li class="list-group-item"><a class="d-block py-2 text-decoration-none" href="#if">If</a></li>
                <li class="list-group-item"><a class="d-block py-2 text-decoration-none" href="#switch">Switch</a></li>
                <li class="list-group-item"><a class="d-block py-2 text-decoration-none" href="#while">While</a></li>
                <li class="list-group-item"><a class="d-block py-2 text-decoration-none" href="#for">For</a></li>
                <li class="list-group-item"><a class="d-block py-2 text-decoration-none" href="#foreach">Foreach</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row g-4">
      <!-- TOC desktop -->
      <aside class="col-12 col-lg-3 d-none d-lg-block">
        <nav id="tocNav" class="toc">
          <div class="section-soft p-3">
            <h6 class="text-uppercase text-muted mb-2">Contenido</h6>
            <ol class="nav flex-column small gap-1">
              <li class="nav-item"><a class="nav-link" href="#intro">Introducción</a></li>
              <li class="nav-item"><a class="nav-link" href="#if">If</a></li>
              <li class="nav-item"><a class="nav-link" href="#switch">Switch</a></li>
              <li class="nav-item"><a class="nav-link" href="#while">While</a></li>
              <li class="nav-item"><a class="nav-link" href="#for">For</a></li>
              <li class="nav-item"><a class="nav-link" href="#foreach">Foreach</a></li>
            </ol>
          </div>
        </nav>
      </aside>

      <!-- SECCIONES -->
      <div class="col-12 col-lg-9">

        <!-- INTRO -->
        <section id="intro" class="section-soft p-4 p-md-5 mb-4">
          <h2 class="mb-3">Introducción a PHP</h2>
          <p class="lead">
            <strong>PHP (Hypertext Preprocessor)</strong> es uno de los lenguajes de programación más utilizados en el desarrollo web del lado del servidor. 
            Permite crear páginas dinámicas, procesar formularios, gestionar bases de datos y generar contenido en tiempo real.
          </p>
          <p>Aprender PHP es un primer paso fundamental para quienes desean adentrarse en el mundo del desarrollo web, ya que combina sencillez, flexibilidad y una gran comunidad de soporte.</p>
          <p>En esta página encontrarás una introducción a las <strong>estructuras básicas de control en PHP</strong>, que son la base para tomar decisiones y repetir acciones dentro de un programa:</p>
          <ul class="list-group rounded-3 overflow-hidden">
            <li class="list-group-item"><strong>If</strong>: ejecutar código bajo una condición.</li>
            <li class="list-group-item"><strong>Switch</strong>: seleccionar entre múltiples opciones.</li>
            <li class="list-group-item"><strong>While</strong>: repetir acciones mientras se cumpla una condición.</li>
            <li class="list-group-item"><strong>For</strong>: repetir acciones un número definido de veces.</li>
            <li class="list-group-item"><strong>Foreach</strong>: recorrer arreglos y colecciones de datos.</li>
          </ul>
          <p class="mt-3">Con estos conceptos podrás comenzar a escribir tus primeros programas en PHP y comprender cómo los sitios web toman decisiones y procesan información.</p>
        </section>

        <!-- IF -->
        <section id="if" class="card card-elev mb-4">
          <div class="card-body p-4 p-md-5">
            <div class="section-title"><span class="badge text-white">If</span><span>Condicional</span></div>
            <p>
              Las sentencias <strong>if</strong> en PHP sirven para ejecutar un bloque de código de forma condicional, es decir, solo si se cumple una determinada expresión o 
              condición que evalúa a verdadero (<code>true</code>), y esto permite al programa tomar decisiones, definir comportamientos distintos para diferentes escenarios y 
              controlar el flujo de ejecución de la aplicación web.
            </p>
            <p class="mb-2">Por ejemplo:</p>
            <div class="position-relative">
              <button class="btn btn-sm btn-outline-secondary btn-copy" data-target="code-if" aria-label="Copiar código If"><i class="bi bi-clipboard"></i></button>
              <pre><code id="code-if" class="language-php">&lt;?php
$numero = 10;
if ($numero &gt; 5) {
  echo "El número es mayor que 5";
}
?&gt;</code></pre>
            </div>
            <div class="alert alert-info mt-3 mb-0">
              <strong>Explicación:</strong> La condición <code>$numero &gt; 5</code> se evalúa como verdadera porque <code>$numero</code> vale 10. 
              Por lo tanto, se ejecuta el bloque dentro del <code>if</code> y se muestra <em>"El número es mayor que 5"</em>.
            </div>
          </div>
        </section>

        <!-- SWITCH -->
        <section id="switch" class="card card-elev mb-4">
          <div class="card-body p-4 p-md-5">
            <div class="section-title"><span class="badge text-white">Switch</span><span>Selección múltiple</span></div>
            <p>
              La instrucción <strong>switch</strong> sirve como una alternativa más limpia y organizada a múltiples declaraciones <code>if-elseif-else</code> para ejecutar diferentes bloques de 
              código basándose en el valor de una única variable o expresión. Es especialmente útil cuando se necesita comparar la misma variable con muchos valores 
              posibles y ejecutar una acción distinta para cada uno, haciendo el código más legible y fácil de mantener.
            </p>
            <p class="mb-2">Por ejemplo:</p>
            <div class="position-relative">
              <button class="btn btn-sm btn-outline-secondary btn-copy" data-target="code-switch" aria-label="Copiar código Switch"><i class="bi bi-clipboard"></i></button>
              <pre><code id="code-switch" class="language-php">&lt;?php
$dia = "lunes";
switch ($dia) {
  case "lunes":
    echo "Primer dia de semana";
    break;
  case "martes":
    echo "Segundo dia de semana";
    break;
  case "Miercoles":
    echo "Tercer dia de semana";
    break;
  case "Jueves":
    echo "Cuarto dia de semana";
    break;
  case "viernes":
    echo "Quinto dia de semana";
    break;
  case "sabado":
    echo "Sexto dia de semana";
    break;
  case "domingo":
    echo "Septimo y ultimo dia de semana";
    break;
  default:
    echo "Día no válido";
}
?&gt;</code></pre>
            </div>
            <div class="alert alert-info mt-3 mb-0">
              <strong>Explicación:</strong> La variable <code>$dia</code> contiene <em>"lunes"</em>. 
              El <code>switch</code> encuentra coincidencia con ese caso y se imprime <em>"Primer dia de semana"</em>. 
              Si <code>$dia</code> tuviera un valor no contemplado, se ejecutaría el <code>default</code>.
            </div>
          </div>
        </section>

        <!-- WHILE -->
        <section id="while" class="card card-elev mb-4">
          <div class="card-body p-4 p-md-5">
            <div class="section-title"><span class="badge text-white">While</span><span>Bucle</span></div>
            <p>
              La instrucción <strong>while</strong> sirve para ejecutar repetidamente un bloque de código mientras una condición especificada sea verdadera. 
              La condición se evalúa al principio de cada iteración: si es verdadera, se ejecuta el bloque; si es falsa, el bucle termina. 
              Es útil cuando no se sabe exactamente cuántas veces se repetirá el código pero sí bajo qué condición debe continuar o detenerse.
            </p>
            <div class="position-relative">
              <button class="btn btn-sm btn-outline-secondary btn-copy" data-target="code-while" aria-label="Copiar código While"><i class="bi bi-clipboard"></i></button>
              <pre><code id="code-while" class="language-php">&lt;?php
$i = 1;
while ($i &lt;= 100) {
  echo $i;
  $i++;
}
?&gt;</code></pre>
            </div>
            <div class="alert alert-info mt-3 mb-0">
              <strong>Explicación:</strong> El bucle comienza con <code>$i = 1</code>. 
              Mientras <code>$i &lt;= 100</code> sea verdadero, se imprime <code>$i</code> y luego se incrementa con <code>$i++</code>. 
              El ciclo muestra los números del 1 al 100.
            </div>

            <!-- Variante do...while ya existente en tu página -->
            <h5 class="mt-4">Variante: <code>do...while</code></h5>
            <div class="position-relative">
              <button class="btn btn-sm btn-outline-secondary btn-copy" data-target="code-do-while" aria-label="Copiar código do-while"><i class="bi bi-clipboard"></i></button>
              <pre><code id="code-do-while" class="language-php">&lt;?php
$j = 1;
do {
  echo $j . " ";
  $j++;
} while ($j &lt;= 5);
?&gt;</code></pre>
            </div>
          </div>
        </section>

        <!-- FOR -->
        <section id="for" class="card card-elev mb-4">
          <div class="card-body p-4 p-md-5">
            <div class="section-title"><span class="badge text-white">For</span><span>Bucle</span></div>
            <p>
              La instrucción <strong>for</strong> en PHP sirve para ejecutar un bloque de código un número específico de veces, siendo ideal cuando se conoce de antemano la cantidad de iteraciones.
              Se compone de tres partes: la <em>inicialización</em> (se ejecuta una vez al inicio), la <em>condición</em> (se evalúa antes de cada iteración) y la <em>actualización</em> (se ejecuta al final de cada vuelta).
              Es útil para recorrer estructuras como vectores/matrices o para realizar una tarea repetidamente.
            </p>
            <div class="position-relative">
              <button class="btn btn-sm btn-outline-secondary btn-copy" data-target="code-for" aria-label="Copiar código For"><i class="bi bi-clipboard"></i></button>
              <pre><code id="code-for" class="language-php">&lt;?php
for ($i = 1; $i &lt;= 10; $i++) {
  echo $i;
}
?&gt;</code></pre>
            </div>
            <div class="alert alert-info mt-3">
              <strong>Explicación:</strong> El bucle inicia con <code>$i = 1</code> y se repite mientras <code>$i &lt;= 10</code>. 
              En cada iteración, <code>$i</code> aumenta en 1 (<code>$i++</code>). Se imprimen los números del 1 al 10.
            </div>

            <!-- Control de flujo que ya tenías -->
            <h5 class="mt-4">Control de flujo</h5>
            <div class="position-relative">
              <button class="btn btn-sm btn-outline-secondary btn-copy" data-target="code-for-ctrl" aria-label="Copiar código control de flujo"><i class="bi bi-clipboard"></i></button>
              <pre><code id="code-for-ctrl" class="language-php">&lt;?php
for ($i = 1; $i &lt;= 10; $i++) {
  if ($i === 3) continue; // salta el 3
  if ($i === 8) break;    // corta en 7
  echo $i . " ";
}
?&gt;</code></pre>
            </div>
          </div>
        </section>

        <!-- FOREACH -->
        <section id="foreach" class="card card-elev mb-4">
          <div class="card-body p-4 p-md-5">
            <div class="section-title"><span class="badge text-white">Foreach</span><span>Colecciones</span></div>
            <p>
              La estructura <strong>foreach</strong> sirve para recorrer cada elemento de un array u objeto <em>Traversable</em>, ejecutando un bloque de código para cada elemento. 
              Es ideal para interactuar con colecciones, pues permite acceder de forma sencilla al valor (y opcionalmente a la clave) de cada elemento en cada iteración, haciendo el código 
              más legible y limpio que los bucles <code>for</code> o <code>while</code> tradicionales.
            </p>
            <div class="position-relative">
              <button class="btn btn-sm btn-outline-secondary btn-copy" data-target="code-foreach" aria-label="Copiar código Foreach"><i class="bi bi-clipboard"></i></button>
              <pre><code id="code-foreach" class="language-php">&lt;?php
$colores = ["rojo", "verde", "azul"];
foreach ($colores as $color) {
  echo $color;
}
?&gt;</code></pre>
            </div>
            <div class="alert alert-info mt-3">
              <strong>Explicación:</strong> El <code>foreach</code> recorre el arreglo <code>$colores</code>, tomando cada valor en la variable <code>$color</code> en cada iteración. 
              Se mostrarán en pantalla <em>"rojo"</em>, <em>"verde"</em> y <em>"azul"</em> de manera ordenada.
            </div>

            <!-- Sub-secciones originales que ya existían -->
            <h5 class="mt-4">Claves y valores</h5>
            <div class="position-relative">
              <button class="btn btn-sm btn-outline-secondary btn-copy" data-target="code-foreach-kv" aria-label="Copiar código claves y valores"><i class="bi bi-clipboard"></i></button>
              <pre><code id="code-foreach-kv" class="language-php">&lt;?php
$edades = ["Ana" =&gt; 20, "Luis" =&gt; 22, "Marta" =&gt; 19];
foreach ($edades as $nombre =&gt; $edad) {
  echo $nombre . " tiene " . $edad . " años\n";
}
?&gt;</code></pre>
            </div>

            <h5 class="mt-4">Modificar por referencia</h5>
            <div class="position-relative">
              <button class="btn btn-sm btn-outline-secondary btn-copy" data-target="code-foreach-ref" aria-label="Copiar código por referencia"><i class="bi bi-clipboard"></i></button>
              <pre><code id="code-foreach-ref" class="language-php">&lt;?php
$nums = [1,2,3];
foreach ($nums as &amp;$n) {
  $n *= 2; // modifica el arreglo original
}
unset($n); // libera la referencia
print_r($nums); // [2,4,6]
?&gt;</code></pre>
            </div>
          </div>
        </section>

        <!-- CTA -->
        

      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="py-4 mt-5">
    <div class="container d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2">
      <p class="mb-0 small">Pablo G, Ixar H — Introducción a PHP (© 2025)</p>
      
    </div>
  </footer>

  <!-- Back to top -->
  <button id="toTop" class="btn btn-primary p-3" aria-label="Volver arriba"><i class="bi bi-arrow-up"></i></button>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/common.min.js"></script>
  <script>
    try{ hljs.highlightAll(); }catch(e){}

    // ===== Tema con persistencia + tema highlight.js =====
    (function(){
      const root = document.documentElement;
      const btn = document.getElementById('themeToggle');
      const hljsTheme = document.getElementById('hljsTheme');
      const stored = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const initial = stored || (prefersDark ? 'dark' : 'light');
      apply(initial);

      btn.addEventListener('click', () => {
        const next = (root.getAttribute('data-bs-theme') === 'dark') ? 'light' : 'dark';
        apply(next);
        localStorage.setItem('theme', next);
      });

      function apply(theme){
        root.setAttribute('data-bs-theme', theme);
        btn.innerHTML = theme === 'dark'
          ? '<i class="bi bi-brightness-high"></i> Tema claro'
          : '<i class="bi bi-moon-stars"></i> Tema oscuro';
        if(hljsTheme){
          hljsTheme.href = theme === 'dark'
            ? 'https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark-dimmed.min.css'
            : 'https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css';
        }
      }
    })();

    // ===== Copiar código =====
    document.querySelectorAll('.btn-copy').forEach(btn=>{
      btn.addEventListener('click', async()=>{
        const id = btn.getAttribute('data-target');
        const code = document.getElementById(id)?.innerText || '';
        try{
          await navigator.clipboard.writeText(code);
          btn.innerHTML = '<i class="bi bi-clipboard-check"></i>';
          btn.classList.replace('btn-outline-secondary','btn-success');
          setTimeout(()=>{
            btn.innerHTML = '<i class="bi bi-clipboard"></i>';
            btn.classList.replace('btn-success','btn-outline-secondary');
          }, 1400);
        }catch(e){ console.error(e); }
      });
    });

    // ===== Cerrar acordeón móvil al hacer clic en un enlace =====
    document.querySelectorAll('#tocMobile a').forEach(a=>{
      a.addEventListener('click', ()=> {
        const c = document.getElementById('c-toc');
        if (c && c.classList.contains('show')) {
          const acc = bootstrap.Collapse.getOrCreateInstance(c);
          acc.hide();
        }
      });
    });

    // ===== Mostrar botón volver arriba =====
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', ()=>{ toTop.style.display = window.scrollY > 420 ? 'inline-flex' : 'none'; });
    toTop.addEventListener('click', ()=>{ window.scrollTo({ top: 0, behavior: 'smooth' }); });

    // ===== Resaltar enlace activo del TOC (desktop) =====
    const tocLinks = document.querySelectorAll('#tocNav .nav-link');
    const sections = [...tocLinks].map(l=> document.querySelector(l.getAttribute('href'))).filter(Boolean);
    const observer = new IntersectionObserver(entries=>{
      entries.forEach(entry=>{
        const id = '#' + entry.target.id;
        const link = document.querySelector(`#tocNav .nav-link[href="${id}"]`);
        if(link){
          if(entry.isIntersecting) link.classList.add('active');
          else link.classList.remove('active');
        }
      });
    }, { rootMargin: "-40% 0px -55% 0px", threshold: 0.01 });
    sections.forEach(s=> observer.observe(s));
  </script>
</body>
</html>
